---
import Layout from "@layouts/Layout.astro";
import Post from "@components/post/Post.astro";
import { actions } from "astro:actions";

const { slug } = Astro.params;

const { data } = await Astro.callAction(actions.post.getPostBySlug, {
  slug: slug.trim(),
});

if (!data) {
  return Astro.redirect("/404");
}

const post = data;
---

<Layout title={`${slug}`} description={data.description}>
  <Post post={post} />
</Layout>
